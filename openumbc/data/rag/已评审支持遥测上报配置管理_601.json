{
    "topic_id": 601,
    "question": "【已评审】支持遥测上报配置管理 - content: ISSUE链接\n【需求】可观测新增redfish、web接口及属性-rackmount-GitCode\n背景\n为提高系统监控和故障排查效率，优化用户体验，基于openTelemetry规范完成可观测能力实现，提供北向接口支持用户查询与设置可观测服务的配置\n决策点\n1.是否同意新增web查询与设置接口\n接口名：/UI/Rest/ObservabilityService\n属性名：ServiceEnabled、TLSMode、Receivers、Id、Enabled、Address、Port\n2.是否同意新增web测试功能接口\n接口名：/UI/Rest/ObservabilityService/SubmitTestTelemetryData\n属性名：ReceiverId\n3.是否同意新增资源树属性\n资源树path：/bmc/kepler/ObservabilityService\n资源树intf：bmc.kepler.ObservabilityService\n属性：Enabled、TLSMode\n资源树path：/bmc/kepler/ObservabilityService/Receivers/:Id\n资源树intf：bmc.kepler.ObservabilityService.Receiver\n属性：ReceiverId、Enabled、Address、Port\nMethod：SubmitTestTelemetryData\n详细描述\n一、可观测服务查询与设置接口\nURI：/UI/Rest/ObservabilityService\n变化类型：新增URI\n操作类型： GET/PATCH\n应用场景：用户更改可观测相关配置\n\n属性名称\n取值类型\n取值范围\n默认值\n操作权限\n说明\n\nServiceEnabled\nboolean\ntrue/false\nfalse\nDiagnoseMgmt\n可观测服务使能状态\n\nTLSMode\nstring\nTLS（单向TLS认证）、mTLS（双向TLS认证）备选：OneWay（单向）、TwoWay（双向）\nTLS\nDiagnoseMgmt\n可观测服务认证方式，必须使用证书认证\n\nReceivers\narray\n当前只支持一个接收端，预留拓展能力\n\nId\ninteger\n0\n0\nDiagnoseMgmt\n接收端序号\n\nEnabled\nboolean\ntrue/false\nfalse\nDiagnoseMgmt\n接收端使能状态\n\nAddress\nString\nipv4、ipv6和域名地址\n“”\nDiagnoseMgmt\n接收端地址，默认值为空\n\nPort\ninteger\n1-65535\n0\nDiagnoseMgmt\n接收端端口\n\n二、可观测服务测试接口\nURI：/UI/Rest/ObservabilityService/SubmitTestTelemetryData\n变化类型：新增URI\n操作类型： POST\n应用场景：用户进行可观测功能服务测试\n\n属性名称\n取值类型\n取值范围\n默认值\n操作权限\n说明\n\nReceiverId\ninteger\n0\nNA\nDiagnoseMgmt\n接收端序号\n\n三、可观测服务资源树接口\n（1）\n资源path：/bmc/kepler/ObservabilityService\n资源interface：bmc.kepler.ObservabilityService\n变化类型：新增接口/属性\n应用场景：用户更改可观测相关配置\n持久化类型：掉电持久化\n操作权限：DiagnoseMgmt\n\n属性名称\n签名\n变化通知\n默认值\n操作权限\n说明\n\nEnabled\nb\ntrue\nfalse\nDiagnoseMgmt\n可观测服务使能状态\n\nTLSMode\ns\ntrue\nTLS\nDiagnoseMgmt\n可观测服务认证方式，必须使用证书认证，取值范围为TLS（单向认证）和mTLS（双向认证）备选：OneWay（单向）、TwoWay（双向）\n\n（2）\n资源path：/bmc/kepler/ObservabilityService/Receivers/:Id\n资源interface：bmc.kepler.ObservabilityService.Receiver\n变化类型：新增接口/属性\n应用场景：用户更改可观测相关配置\n持久化类型：掉电持久化\n操作权限：DiagnoseMgmt\n\n属性名称\n签名\n变化通知\n默认值\n操作权限\n说明\n\nReceiverId\ny\ntrue\n\nDiagnoseMgmt\n接收端序号，当前只有一个接收端，固定为1\n\nEnabled\nb\ntrue\nfalse\nDiagnoseMgmt\n接收端使能状态\n\nAddress\ns\ntrue\n“”\nDiagnoseMgmt\n接收端地址，约束需要符合ipv4、ipv6和域名地址格式，默认值为空\n\nPort\nq\ntrue\n0\nDiagnoseMgmt\n接收端端口，默认值为0，取值范围为[1,65535]\n\n方法名称\nreq签名\n请求参数\n操作权限\n说明\n\nSubmitTestTelemetryData\nNA\nNA\nDiagnoseMgmt\n可观测服务测试接口\n\n评审结论\n一、\n同意新增web查询与设置接口\n接口名：/UI/Rest/ObservabilityService\n\n属性名称\n取值类型\n取值范围\n默认值\n操作权限\n说明\n\nServiceEnabled\nboolean\ntrue/false\nfalse\nDiagnoseMgmt\n可观测服务使能状态\n\nTLSMode\nstring\nTLS（单向TLS认证）、mTLS（双向TLS认证\nTLS\nDiagnoseMgmt\n可观测服务认证方式，必须使用证书认证\n\nReceivers\narray\n当前只支持一个接收端，预留拓展能力\n\nId\ninteger\n0\n0\nDiagnoseMgmt\n接收端序号\n\nEnabled\nboolean\ntrue/false\nfalse\nDiagnoseMgmt\n接收端使能状态\n\nAddress\nString\nipv4、ipv6和域名地址\n“”\nDiagnoseMgmt\n接收端地址，可为空\n\nPort\ninteger\n1-65535\n0\nDiagnoseMgmt\n接收端端口\n\nProtocol\nString\n“OtlpHttp”\n“OtlpHttp”\nDiagnoseMgmt\n可观测服务支持的协议与数据格式\n\n二、\n同意新增web测试功能接口\n接口名：/UI/Rest/ObservabilityService/SubmitTestTelemetryData\n\n属性名称\n取值类型\n取值范围\n默认值\n操作权限\n说明\n\nReceiverId\ninteger\n0\nNA\nDiagnoseMgmt\n接收端序号\n\n三、\n同意新增资源树属性\n资源树path：/bmc/kepler/ObservabilityService\n资源树intf：bmc.kepler.ObservabilityService\n属性：Enabled、TLSMode\n\n属性名称\n签名\n变化通知\n默认值\n操作权限\n说明\n\nEnabled\nb\ntrue\nfalse\nDiagnoseMgmt\n可观测服务使能状态\n\nTLSMode\ns\ntrue\nTLS\nDiagnoseMgmt\n可观测服务认证方式，必须使用证书认证，取值范围为TLS（单向认证）和mTLS（双向认证）\n\n资源树path：/bmc/kepler/ObservabilityService/Receivers/:Id\n资源树intf：bmc.kepler.ObservabilityService.Receiver\n属性：ReceiverId、Enabled、Address、Port、Protocol\nMethod：SubmitTestTelemetryData\n\n属性名称\n签名\n变化通知\n默认值\n操作权限\n说明\n\nReceiverId\ny\ntrue\n\nDiagnoseMgmt\n接收端序号，当前只有一个接收端，固定为1\n\nEnabled\nb\ntrue\nfalse\nDiagnoseMgmt\n接收端使能状态\n\nAddress\ns\ntrue\n“”\nDiagnoseMgmt\n接收端地址，约束需要符合ipv4、ipv6和域名地址格式，默认值为空\n\nPort\nq\ntrue\n0\nDiagnoseMgmt\n接收端端口，默认值为0，取值范围为[1,65535]\n\nProtocol\ns\ntrue\n“OtlpHttp”\nDiagnoseMgmt\n可观测服务支持的协议与数据格式\n\n方法名称\nreq签名\n请求参数\n操作权限\n说明\n\nSubmitTestTelemetryData\nNA\nNA\nDiagnoseMgmt\n可观测服务测试接口\nlinks: https://gitcode.com/openUBMC/rackmount/issues/29",
    "topic_user_name": "HuoJianCong",
    "best_answer_url": "",
    "reply_posts": [
        {
            "user_name": "huanghan",
            "topic_closed": null,
            "is_solution": false,
            "post_url": "/t/topic/601/2",
            "text": ""
        }
    ]
}