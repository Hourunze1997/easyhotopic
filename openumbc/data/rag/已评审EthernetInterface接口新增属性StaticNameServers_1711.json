{
    "topic_id": 1711,
    "question": "【已评审】EthernetInterface接口新增属性StaticNameServers - content: issue链接\n\ngitcode.com\n\nGitCode - 全球开发者的开源社区,开源代码托管平台\nGitCode是面向全球开发者的开源社区,包括原创博客,开源代码托管,代码协作,项目管理等。与开发者社区互动,提升您的研发效率和质量。\n\n背景介绍\n\nRedfish接口EthernetInterface待实现的标准资源属性StaticNameServers与已实现标准资源属性NameServers、已实现自定义资源属性DNSAddressOrigin在实现上产生冲突，需要新增兼容性方案\n\nuri：/redfish/v1/Managers/1/Ethernetinterfaces/:ethernetinterface\n应用场景：客户查询、修改BMC网口信息\n\n属性名称\n取值类型\n默认值\n属性含义\n属性状态\n操作类型\n备注\n\nStaticNameServers\nArray(String)\n[“”, “”, “”](静态模式)[  ](动态模式)\n静态DNS服务器IP地址集\n本次新增(标准资源)\nGET/PATCH\n静态模式下，StaticNameServers与NameServers内容相同。\n\nNameServers\nArray(String)\n[“”, “”, “”]\nDNS服务器IP地址集\n已实现(标准资源)\nGET/PATCH(标准资源中仅支持GET)\n\nDNSAddressOrigin\nString(枚举值:Static;Ipv4;Ipv6)\nStatic\nDNS服务器IP地址集\n已实现(自定义资源)\nGET/PATCH\n\n上述属性的权限均为GET:ReadOnly,PATCH:BasicSetting\n均不为频繁变化属性，不需屏蔽事件变化\n\n现状\n当前已实现的NameServers兼具静态模式与动态模式下的DNS服务器IP地址集查询功能与静态模式下的DNS服务器IP地址集设置功能（静态模式DNS设置功能应由StaticNameServers提供 - redfish规范 2017.3新增），新增StaticNameServers属性后，会与现有的NameServers实现产生冲突\n\nNameServers\nStaticNameServers\n\nredfish协议规范\n只支持GET\n支持GET与PATCH\n\n当前实现\n支持GET与PATCH，其中PATCH操作可以设置静态DNS配置\n尚未提供该属性（本次计划新增）\n\n决策点一：StaticNameServers属性与NameServers属性的PATCH操作\n方案一\n(兼容性方案)\n\n前置条件\n场景\n执行方式\n对周边领域影响\n\n动态模式\n设置StaticNameServers\n设置失败，响应PropertyValueConflict\nStaticNameServers为新增属性，无影响\n\n静态模式\n同时设置StaticNameServers与NameServers,设置的值不同\n设置失败，响应PropertyValueConflict\nStaticNameServers为新增属性，无影响\n\n静态模式\n同时设置StaticNameServers与NameServers,设置的值相同\n设置成功\nStaticNameServers为新增属性，无影响\n\n单独设置DNSAddressOrigin与NameServers的场景与原有实现相同，对于网管/功能无兼容性影响\n同时在文档中添加声明，设置NameServers为不推荐用法，如果需要需要设置静态DNS，建议采用StaticNameServers\n\n方案二\n(接口变更方案，与redfish标准协议和其他BMC团体实现保持一致)\n\n前置条件\n场景\n执行方式\n对周边领域影响\n\n动态模式\n设置StaticNameServers\n设置失败，响应PropertyValueConflict\nStaticNameServers为新增属性，无影响\n\n静态模式\n设置StaticNameServers\n设置成功\nStaticNameServers为新增属性，无影响\n\n无\n设置NameServers\n设置失败，响应PropertyNotWritable\n删除了原有属性的PATCH方法，周边需要将原有对NameServers的设置变为对StaticNameServers的设置\n\n删除NameServers的PATCH方法，实现与Redfish规范一致\n\n评审结论\n采用方案一兼容性方案\n实现方案重大变更，暂时挂起\n遗留问题\nlinks: #p-4143-issue-1, https://gitcode.com/openUBMC/rackmount/issues/201, https://gitcode.com/openUBMC/rackmount/issues/201, #p-4143-h-2, #p-4143-h-3, #p-4143-staticnameserversnameserverspatch-4, #p-4143-h-5, #p-4143-h-6, #p-4143-h-7, #p-4143-h-8",
    "topic_user_name": "Zhangyu",
    "best_answer_url": "",
    "reply_posts": []
}