{
    "topic_id": 1937,
    "question": "【待评审】新增读取远程持久化数据库表的调试接口 - content: ISSUE链接\nhttps://gitcode.com/openUBMC/mdb_interface/issues/163\n背景\n\n提升持久化数据分析和问题定位效率，支持BMC Studio工具的在线调试，在线获取全量持久化数据，并可视化呈现。\n但工具直接读取数据库文件表，会存在数据分散、无法还原为行数据等问题，需要为工具提供表模型一致的持久化数据。\n实现方案为：持久化在调试版本与工具对接，提供获取远程持久化表数据的调试接口（与原bmc.kepler.persistence查询效果一致）\n\n决策点\n新增资源协作接口用于实现调试版本读取远程持久化表数据，通过该接口下的方法获取数据时，不做用户权限和持久化数据属主的校验，且在发布版本中对调试接口及实现进行裁剪，其他子系统业务实现不依赖该调试接口。\n详细描述\n1. 资源协作调试接口：\n资源path：/bmc/kepler/Debug/Persistence\n资源interface：bmc.kepler.Persistence\n2. 新增方法：Read、BatchRead\n（1）该接口的两种方法与现有/bmc/kepler/persistence下的bmc.kepler.persistence接口的Read和BatchRead方法，除了权限不同与不做数据属主校验外，在业务实现上保持一致。\n（2）该接口通过定义在debug目录进行裁剪，只在debug版本可用。\n3. Read方法\n\n方法名称\n变化类型\n签名\n读写&权限\n持久化\n变化通知\n入参说明\n接口说明\n响应参数\n接口约束\n\nRead\n新增方法\nss\nReadOnly\nNA\nNA\n入参为两个字符串，分别表示数据表名、发起请求的app名称\n获取指定表名的所有持久化数据\n出参是1个字典结构（a(sa{say}))，表示对应表内的所有数据。每个id对应1个字典，字典内容为持久化的键值对。\nNA\n\n4. BatchRead方法\n\n方法名称\n变化类型\n签名\n读写&权限\n持久化\n变化通知\n入参说明\n接口说明\n响应参数\n接口约束\n\nBatchRead\n新增方法\nas\nReadOnly\nNA\nNA\n入参为字符串数组，表示服务名、数据表名\n批量读取数据库表数据，获取指定表名的所有持久化数据\n出参是1个字典结构(a{sa{sa{say}}})，表示对应表的所有数据。内容包括持久化表/id/持久化数据/持久化键值对\nNA\n\n删除资源协作接口方法\n资源interface：bmc.kepler.Persistence\n方法：HasTableHistoryRecord（查询表格是否曾经存在过）\n新增背景：bmc.kepler.Persistence接口和HasTableHistoryRecord方法是2023年为了解决持久化预置数据无法删除的问题，从而评审增加。\n删除原因：实际解决问题采用了其他方案，该接口下的方法一直未被使用。\nlinks: #p-4767-issue-1, https://gitcode.com/openUBMC/mdb_interface/issues/163, #p-4767-h-2, #p-4767-h-3, #p-4767-h-4, #p-4767-h-5",
    "topic_user_name": "whx0.0",
    "best_answer_url": "",
    "reply_posts": []
}