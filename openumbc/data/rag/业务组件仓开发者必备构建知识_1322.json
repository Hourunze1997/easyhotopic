{
    "topic_id": 1322,
    "question": "业务组件仓开发者必备构建知识 - content: 1. 引言\nopenUBMC的架构为微组件形式，各组件可独立编译构建，最后由manifest构建形成整个软件。在组件开发中，开发工具bingo build可以帮开发人员实现一键编译构建，conanbase.py构建脚本也在执行bingo build过程中自动生成，在大部分不需要新增C文件的情况下，开发人员仅需专注业务代码，而几乎不需要负责编译文件这个过程。\n但是，开发有时候需要上环境调试功能，如果每次都要重新构建出包，会浪费时间，而且有一些情况需要加上构建参数不然会有意想不到的错误。所以，开发人员需要了解基础的构建知识和原理以便于更好的定位问题和调试。\n当BMC软件部署在环境上时，各业务组件仓中的lua代码一般放在/目录下，lua代码在构建过程中会被打成二进制乱码（功能与源码等效），但是由于lua语言是脚本语言，相当于可执行的程序，无需编译，因此在环境上可以直接替换进行调试。\nC语言/C++则是被打包成不同的.so(.so.0.1.0)文件部署到环境上，通常在/lib64文件夹下，这些.so文件通常是由数个.h头文件，.c源文件，再加上C语言通用库等共同编译得到的，具体需要查看组件仓中的cmakelists.txt等文件内容。如果实在不知道在哪里，也可以在环境上通过linux命令find查询到。\n以下从一个业务组件仓开发法人员的角度对BMC组件开发过程中可能需要了解的基础知识做一些总结，目前作者也在持续学习中，有空就更新，写的不对欢迎指正。\n2. C语言/C++编译篇\n2.1 简介\nc语言/c++编译要使用gcc，g++，等等，涉及编译，动态库，静态库，链接等概念。（学习进度不足10%），仅介绍在BMC业务组件开发过程中开发人员需自行编写的文件的常用语法。\n2.2  Cmakelists.txt基本语法和编写\ncmakelist.txt常用命令总结\n\n命令语法\n作用\n\nAUX_SOURCE_DIRECTORY(xx LIB_XXX)\n收集与cmakelist.txt同级的xx目录下的源文件.c和.cpp源文件，放在变量LIB_XXX中\n\nADD_LIBRARY()\n\nINCLUDE_DIRECTORIES()\n\ntarget_link_libraries\n\nSET_TARGET_PROPERTIES\n\nINSTALL\n\nlist()\n\ncmake语法补充说明：\n\n${变量名}：cmake语法\nAUX_SOURCE_DIRECTORY和INCLUDE_DIRECTORIES仅会收集一级目录下的源文件或头文件，不会递归遍历一级文件目录下子文件夹\n常用的C语言库有\n\n如需进一步优化，可考虑使用现代CMake特性（如target_include_directories替代全局INCLUDE_DIRECTORIES）以提高模块化程度。\n2.3 Makefile基本语法和编写\n3.1 conan脚本文件\n3.1 conanbase.py\nconanbase.py文件为执行bingo build过程中自动生成，它的生成过程也依赖于组件仓中cmakelist.txt，service.json等文件，\n3 组件仓bmcgo build构建参数的本质\nlinks: #p-2982-h-1-1, #p-2982-h-2-cc-2, #p-2982-h-21-3, #p-2982-h-22-cmakeliststxt-4, #p-2982-h-23-makefile-5, #p-2982-h-31-conan-6, #p-2982-h-31-conanbasepy-7, #p-2982-h-3-bmcgo-build-8",
    "topic_user_name": "Xieqi29",
    "best_answer_url": "",
    "reply_posts": []
}