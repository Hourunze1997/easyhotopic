{
    "topic_id": 1919,
    "question": "【已评审】支持SSH用户使用超长密码 - content: 背景\n客户诉求SSH专用用户的密码长度限制与linux配置一致。由于用户的密码同时需要用于ipmi，当前仅支持长度1~20，不满足客户使用诉求\n触发原因\n新需求\n关联ISSUE\n【需求】BMC SSH用户支持超长密码\n决策点\n1、新增资源协作属性\npath：/bmc/kepler/AccountService/PasswordPolicys/:AccountType\ninterface：bmc.kepler.AccountService.PasswordPolicy\n变化类型：新增属性\n应用场景：定制组件打开使能后可支持对应账户类型使用长密码\n\n属性名称\n变化类型\n签名\n取值范围\n读写&权限\n持久化\n变化通知\n接口说明\n接口约束\n\nAccountType\n新增属性\ns\n[“Local”、“SnmpCommunity”、“VNC”、“Oem”]\n只读属性\n不持久化\n否\n账户类型\n\nMaxPasswordLength\n新增属性\nu\n最大值：512\nR:ReadOnly W:SecurityMgmt\n临时持久化\n否\n本账户类型可支持的最大密码长度\n仅AccountType为Oem可调整最大密码长度本属性最小值限制由业务基于不同账户类型进行区分\n\n该属性默认值与最小边界值由业务基于账户类型（AccountType）进行区分：\n本地账户（Local）默认密码最大长度：20\nSNMP团体名（SnmpCommunity）默认密码最大长度：32\nVNC默认密码最大长度：8\nOEM账户（Oem）默认密码最大长度：20\n2、修改bmc.kepler.AccountService.ManagerAccount资源协作方法入参限制\npath：/bmc/kepler/AccountService/Accounts/:ManagerAccountId\ninterface：bmc.kepler.AccountService.ManagerAccount\n变化类型：修改属性限制\n应用场景：设置密码\n\n方法名称\n变化类型\n请求签名\n响应签名\n读写&权限\n持久化\n变化通知\n接口说明\n接口约束\n\nChangePwd\n修改属性取值范围\nay\n无\nConfigureSelf\nRPC方法，不涉及\nRPC方法，不涉及\n修改账户密码请求参数： Password：ay待设置的密码长度限制变更：1~32 → 1~512\n管理员账户可以修改所有账户密码，其它账户只能设置自己的密码实际密码长度校验改由业务内部进行校验处理\n\nChangeSnmpPwd\n修改属性取值范围\nay\n无\nConfigureSelf\nRPC方法，不涉及\nRPC方法，不涉及\n修改本地账户SNMP密码请求参数： Password：ay待设置的密码长度限制变更：1~32 → 1~512\n管理员账户可以修改所有账户密码，其它账户只能设置自己的密码实际密码长度校验改由业务内部进行校验处理\n\n3、修改bmc.kepler.AccountService.ManagerAccounts资源协作方法入参限制\npath：/bmc/kepler/AccountService/Accounts\ninterface：bmc.kepler.AccountService.ManagerAccounts\n变化类型：修改属性限制\n应用场景：新建账户\n\n方法名称\n变化类型\n请求签名\n响应签名\n读写&权限\n持久化\n变化通知\n接口说明\n接口约束\n\nNew\n修改属性取值范围\nysayiaii\ny\nUserMgmt\nRPC方法，不涉及\nRPC方法，不涉及\n新建账户请求参数： AccountId: yUserName: sPassword：ay长度限制变更：1~32 → 1~512RoleId: iLoginInterface: aiFirstLoginPolicy: i 响应参数：账户Id：y\n管理员可新建账户实际密码长度校验改由业务内部进行校验处理\n\n4、修改bmc.kepler.AccountService.ManagerAccount.SnmpUser资源协作方法入参限制\npath：/bmc/kepler/AccountService/Accounts/:ManagerAccountId\ninterface：bmc.kepler.AccountService.ManagerAccount.SnmpUser\n变化类型：修改属性限制\n应用场景：修改账户SNMP鉴权算法\n\n方法名称\n变化类型\n请求签名\n响应签名\n读写&权限\n持久化\n变化通知\n接口说明\n接口约束\n\nSetAuthenticationProtocol\n修改账户SNMP鉴权算法\nyss\n无\nConfigureSelf\nRPC方法，不涉及\nRPC方法，不涉及\n修改账户SNMP鉴权算法，同时需要刷新SNMP鉴权密码和SNMP加密免请求参数： SNMPAuthenticationProtocol: yAuthPassword: s长度限制变更：1~32 → 1~512EncryPassword：ay长度限制变更：1~32 → 1~512\n管理员账户可以修改所有账户的配置，其它账户只能设置自己的配置实际密码长度校验改由业务内部进行校验处理\n\n5、修改bmc.kepler.SessionService.Sessions资源协作方法入参限制\npath：/bmc/kepler/SessionService/Sessions\ninterface：bmc.kepler.SessionService.Sessions\n变化类型：修改属性限制\n应用场景：通过账户密码鉴权创建会话\n\n方法名称\n变化类型\n请求签名\n响应签名\n读写&权限\n持久化\n变化通知\n接口说明\n接口约束\n\nNewSession\n修改属性取值范围\nsayyssa{ss}\nsss\nConfigureSelf\nRPC方法，不涉及\nRPC方法，不涉及\n通过账户密码鉴权创建会话请求参数： UserName: sPassword：ay长度限制变更：1~32 → 1~512SessionType: yDomain: sIp: sExtraData: a{ss} 响应参数：token：scsrf_token：ssession_id：s\n\n评审结论\n决策点1：同意新增资源协作属性\npath：/bmc/kepler/AccountService/PasswordPolicys/:AccountType\ninterface：bmc.kepler.AccountService.PasswordPolicy\n① 属性名称：AccountType\n签名：s\n取值范围： [“Local”、“SnmpCommunity”、“VNC”、“Oem”]\n读写权限：只读\n② 属性名称：MaxPasswordLength\n签名：u\n取值范围：最大值512\n说明：\n该属性默认值与最小边界值由业务基于账户类型（AccountType）进行区分，沿用历史业务中明确的最大长度：\n本地账户（Local）：20\nSNMP团体名（SnmpCommunity）：32\nVNC：8\nOEM账户（Oem）：20\n决策点2：同意变更资源协作接口\npath：/bmc/kepler/AccountService/Accounts/:ManagerAccountId\ninterface：bmc.kepler.AccountService.ManagerAccount\n①方法名称：ChangePwd\n变更类型：修改属性取值范围\n变更参数：Password\n变更前：长度限制 1 ~ 32\n变更后：长度限制 1 ~ 512\n②方法名称：ChangeSnmpPwd\n变更类型：修改属性取值范围\n变更参数：Password\n变更前：长度限制 1 ~ 32\n变更后：长度限制 1 ~ 512\n决策点3：同意变更资源协作接口\npath：/bmc/kepler/AccountService/Accounts\ninterface：bmc.kepler.AccountService.ManagerAccounts\n方法名称：New\n变更类型：修改属性取值范围\n变更参数：Password\n变更前：长度限制 1 ~ 32\n变更后：长度限制 1 ~ 512\n决策点4：同意变更资源协作接口\npath：/bmc/kepler/AccountService/Accounts/:ManagerAccountId\ninterface：bmc.kepler.AccountService.ManagerAccount.SnmpUser\n方法名称：SetAuthenticationProtocol\n变更类型：修改属性取值范围\n① 变更参数：AuthPassword\n变更前：长度限制 1 ~ 32\n变更后：长度限制 1 ~ 512\n② 变更参数：EncryPassword\n变更前：长度限制 1 ~ 32\n变更后：长度限制 1 ~ 512\n决策点5：同意变更资源协作接口\npath：/bmc/kepler/SessionService/Sessions\ninterface：bmc.kepler.SessionService.Sessions\n方法名称：NewSession\n变更类型：修改属性取值范围\n变更参数：Password\n变更前：长度限制 1 ~ 32\n变更后：长度限制 1 ~ 512\n遗留问题\nQ：MaxPasswordLength 属性设置过小与密码复杂度校验能力出现冲突的场景如何解决\nA：开启密码复杂度校验能力后，会对密码的最小长度进行限制。MaxPasswordLength 属性的左边界取不同账户类型历史业务中明确的最大长度，由业务进行判断处理。不会与密码复杂度校验能力出现冲突。\nlinks: #p-4737-h-1, #p-4737-h-2, #p-4737-issue-3, https://gitcode.com/openUBMC/mdb_interface/issues/155, #p-4737-h-4, #p-4737-h-5, #p-4737-h-6",
    "topic_user_name": "pengxianglin",
    "best_answer_url": "",
    "reply_posts": [
        {
            "user_name": "huanghan",
            "topic_closed": null,
            "is_solution": false,
            "post_url": "/t/topic/1919/2",
            "text": ""
        }
    ]
}