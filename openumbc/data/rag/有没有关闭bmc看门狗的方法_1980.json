{
    "topic_id": 1980,
    "question": "有没有关闭bmc看门狗的方法 - bmc每隔五分钟就会自动重启，从串口的打印信息来看是由于看门狗的倒计时，用 .\\ipmitool.exe -H 192.168.2.100  -I lanplus -p 623 -C 17 mc watchdog off的命令尝试关闭看门狗不管用\n串口信息如下：\n[  275.743639] [I2C-11-RT<-5|-5>] M<0x48|0x1|0x0|1|10> L<1|2|0> C<1|0|2> E<0x801|0x0|0x0|0x1> I<0x0|0x710|0x0>\n[  275.757941] [I2C-04-RT<-5|-5>] M<0x30|0x0|0x0|3|10> L<7|0|0> C<7|0|0> E<0x1|0x0|0x0|0x1> I<0x0|0x710|0x0>\n[  276.037291] [I2C-08-RT<-5|-5>] M<0x21|0x1|0x0|1|10> L<1|1|0> C<1|0|1> E<0x801|0x0|0x0|0x1> I<0x0|0x510|0x0>\n[  276.051228] [I2C-08-RT<-5|-5>] M<0x48|0x1|0x0|1|10> L<1|2|0> C<1|0|2> E<0x801|0x0|0x0|0x1> I<0x0|0x710|0x0>\n[  276.814174] [I2C-08-RT<-5|-5>] M<0x47|0x1|0x0|1|10> L<1|1|0> C<1|0|1> E<0x801|0x0|0x0|0x1> I<0x0|0x710|0x0>\n1970-01-01 08:04:47.102906 maca ERROR: init.lua(185): [my_app]StartupCheck failed, error: org.freedesktop.DBus.Error.ServiceUnknown: The name bmc.kepler.my_app was not provided by any .service files, check count: 7\n\niBMC login: 1970-01-01 08:05:02.162482 maca ERROR: init.lua(185): [my_app]StartupCheck failed, error: org.freedesktop.DBus.Error.ServiceUnknown: The name bmc.kepler.my_app was not provided by any .service files, check count: 8\n1970-01-01 08:05:02.236518 maca NOTICE: init.lua(246): recheck startup status completely, total components count: 47, normal count: 46, abnormal components: [my_app]\n         Stopping Session c1 of User Administrator...\n[  OK  ] Removed slice Slice /system/modprobe.\n[  OK  ] Stopped target Multi-User System.\n[  OK  ] Stopped target Login Prompts.\n[  OK  ] Stopped target Timer Units.\n[  OK  ] Stopped start logrotate timer.\n[  OK  ] Stopped start partition usage monitor timer.\n[  OK  ] Stopped Daily Cleanup of Temporary Directories.\n         Stopping alarm service...\n         Stopping ibmc ssdp module...\n[  303.707675] 54,1970-01-01 00:05:03,2623,gpio_cmd_get_int_event,1321,gpio_get_int_event errs(-4)\n         Stopping energy service...\n         Stopping ibmc file transfer module...\n         Stopping Getty on ttyS0...\n         Stopping hardware service...\n         Stopping interface service...\n         Stopping system memory monitor...\n         Stopping my_app service...\n         Stopping om_priv service...\n         Stopping system process memory monitor...\n         Stopping ras service...\n         Stopping rmmod driver service...\n         Stopping security service...\n         Stopping Simple Network Ma…ent Protocol (SNMP) Daemon....\n         Stopping Load/Save Random Seed...\n         Stopping A server which su…tive communication protocol...\n[  OK  ] Stopped system memory monitor.\n[  OK  ] Stopped system process memory monitor.\n[  OK  ] Stopped Getty on ttyS0.\n\n[  OK  ] Stopped A server which sup…active communication protocol.tupCheck failed, error: org.freedesktop.DBus.Error.ServiceUnknown: The name bmc.kepler.my_app was not provided by any .service files, check count: 6\n[  OK  ] Stopped my_app service.ERROR: init.lua(185): [my_app]StartupCheck failed, error: org.freedesktop.DBus.Error.ServiceUnknown: The name bmc.kepler.my_app was not provided by any .service files, check count: 7\n[  OK  ] Stopped alarm service. ERROR: init.lua(185): [my_app]StartupCheck failed, error: org.freedesktop.DBus.Error.ServiceUnknown: The name bmc.kepler.my_app was not provided by any .service files, check count: 8\n[  OK  ] Stopped security service.TICE: init.lua(246): check startup status completely, total components count: 47, normal count: 46, abnormal components: [my_app]\n[  OK  ] Stopped ras service.ca NOTICE: init.lua(342): start to restart abnormal components and recheck startup status\n[  OK  ] Stopped energy service.ERROR: init.lua(185): [my_app]StartupCheck failed, error: org.freedesktop.DBus.Error.ServiceUnknown: The name bmc.kepler.my_app was not provided by any .service files, check count: 1\n[  OK  ] Stopped hardware service.ROR: init.lua(185): [my_app]StartupCheck failed, error: org.freedesktop.DBus.Error.ServiceUnknown: The name bmc.kepler.my_app was not provided by any .service files, check count: 2\n[  OK  ] Stopped om_priv service. M<0x30|0x0|0x0|3|10> L<7|0|0> C<7|0|0> E<0x1|0x0|0x0|0x1> I<0x0|0x710|0x0>\n[  OK  ] Stopped ibmc ssdp module.M<0x48|0x1|0x0|1|10> L<1|2|0> C<1|0|2> E<0x801|0x0|0x0|0x1> I<0x0|0x710|0x0>\n[  OK  ] Stopped interface service.<0x21|0x1|0x0|1|10> L<1|1|0> C<1|0|1> E<0x801|0x0|0x0|0x1> I<0x0|0x710|0x0>\n[  OK  ] Stopped Session c1 of User Administrator.|10> L<1|2|0> C<1|0|2> E<0x801|0x0|0x0|0x1> I<0x0|0x710|0x0>\n[  OK  ] Removed slice Slice /system/getty.1|0x0|1|10> L<1|1|0> C<1|0|1> E<0x801|0x0|0x0|0x1> I<0x0|0x710|0x0>\n         Stopping om service... ERROR: init.lua(185): [my_app]StartupCheck failed, error: org.freedesktop.DBus.Error.ServiceUnknown: The name bmc.kepler.my_app was not provided by any .service files, check count: 3\n         Stopping Rsyslog Logging Service...lua(185): [my_app]StartupCheck failed, error: org.freedesktop.DBus.Error.ServiceUnknown: The name bmc.kepler.my_app was not provided by any .service files, check count: 4\n         Stopping User Login Management...t.lua(185): [my_app]StartupCheck failed, error: org.freedesktop.DBus.Error.ServiceUnknown: The name bmc.kepler.my_app was not provided by any .service files, check count: 5\n         Stopping User Manager for UID 502...ua(185): [my_app]StartupCheck failed, error: org.freedesktop.DBus.Error.ServiceUnknown: The name bmc.kepler.my_app was not provided by any .service files, check count: 6\n[  OK  ] Stopped om service.|-5>] M<0x48|0x1|0x0|1|10> L<1|2|0> C<1|0|2> E<0x801|0x0|0x0|0x1> I<0x0|0x710|0x0>\n[  OK  ] Stopped User Manager for UID 502.x0|0x0|3|10> L<7|0|0> C<7|0|0> E<0x1|0x0|0x0|0x1> I<0x0|0x710|0x0>\n[  OK  ] Stopped Simple Network Man…ement Protocol (SNMP) Daemon..1|0|1> E<0x801|0x0|0x0|0x1> I<0x0|0x510|0x0>\n[  OK  ] Stopped Load/Save Random Seed.8|0x1|0x0|1|10> L<1|2|0> C<1|0|2> E<0x801|0x0|0x0|0x1> I<0x0|0x710|0x0>\n[  OK  ] Stopped Rsyslog Logging Service.0x1|0x0|1|10> L<1|1|0> C<1|0|1> E<0x801|0x0|0x0|0x1> I<0x0|0x710|0x0>\n[  304.687308] 55,1970-01-01 00:05:04,2581,bt_recv_data,428,bt(0) recv req msg ERESTARTSYS, bt_state(0).p.DBus.Error.ServiceUnknown: The name bmc.kepler.my_app was not provided by any .service files, check count: 7\n[  304.688790] 56,1970-01-01 00:05:04,2635,ipmb_cmd_check_data_readable,1285,ipmb check read was interrupted, ret = -4\n         Stopping bmc_core service...2 maca ERROR: init.lua(185): [my_app]StartupCheck failed, error: org.freedesktop.DBus.Error.ServiceUnknown: The name bmc.kepler.my_app was not provided by any .service files, check count: 8\n         Stopping User Runtime Directory /run/user/502...check startup status completely, total components count: 47, normal count: 46, abnormal components: [my_app]\n[  OK  ] Stopped User Login Management.ministrator...\n[  OK  ] Unmounted /run/user/502.tem/modprobe.\n[  OK  ] Stopped User Runtime Directory /run/user/502.\n[  OK  ] Removed slice User Slice of UID 502.\n         Stopping Permit User Sessions...\n[  OK  ] Stopped bmc_core service.imer.\n         Stopping framework service... monitor timer.\n[  OK  ] Stopped Permit User Sessions.orary Directories.\n[  304.948520] dwc3 8800000.dwc3: request ffff1d6b4f0b2600 was not queued to ep1in\n[  304.955823] dwc3 8800000.dwc3: request ffff1d6b4f0b29c0 was not queued to ep2in\n[  OK  ] Stopped framework service.03,2623,gpio_cmd_get_int_event,1321,gpio_get_int_event errs(-4)\n         Stopping D-Bus System Message Bus...\n[  OK  ] Stopped D-Bus System Message Bus.e...\n         Stopping /etc/rc.local Compatibility...\n[  OK  ] Stopped /etc/rc.local Compatibility.\n[  *** ] A stop job is running for rmmod driver service (3s / 1min 30s)\n[   ***] A stop job is running for rmmod driver service (4s / 1min 30s)\n[  308.164156] hisport_cdev: 1413, listen thread end, ret=0\n[  OK  ] Stopped rmmod driver service.\n[  OK  ] Stopped target Basic System.\n[  OK  ] Stopped target Path Units..\n[  OK  ] Stopped Dispatch Password …ts to Console Directory Watch.\n[  OK  ] Stopped Forward Password R…uests to Wall Directory Watch.\n[  OK  ] Stopped target Slice Units.ce...\n[  OK  ] Removed slice User and Session Slice.\n[  OK  ] Stopped target Socket Units.nt Protocol (SNMP) Daemon....\n[  OK  ] Closed D-Bus System Message Bus Socket.\n[  OK  ] Stopped target System Initialization.nication protocol...\n[  OK  ] Stopped Apply Kernel Variables.\n[  OK  ] Stopped Update is Completed.y monitor.\n[  OK  ] Stopped Rebuild Journal Catalog.\n         Stopping Record System Boot/Shutdown in UTMP...\n[  OK  ] Stopped Record System Boot/Shutdown in UTMP.\n[  OK  ] Stopped Create Volatile Files and Directories.\n[  OK  ] Stopped target Local File Systems.\n         Unmounting /data/backup...\n         Unmounting /data/ibma...\n         Unmounting /data/sp...\n         Unmounting /data/trust...\n         Unmounting /etc/machine-id...\n         Unmounting /opt/bmc/pram...\n         Unmounting /tmp...\n         Stopping Flush Journal to Persistent Storage...\n[  OK  ] Unmounted /data/backup.\n[  OK  ] Unmounted /data/ibma.\n[  OK  ] Unmounted /data/sp.\n[  OK  ] Unmounted /data/trust.\n[  OK  ] Unmounted /etc/machine-id.\n[  OK  ] Unmounted /opt/bmc/pram.\n[  OK  ] Unmounted /tmp.\n[  OK  ] Stopped Flush Journal to Persistent Storage.\n         Unmounting /data...\n         Unmounting /var/log...\n[  OK  ] Unmounted /data.\n[  OK  ] Unmounted /var/log.\n         Unmounting /var...\n[  OK  ] Unmounted /var.\n[  OK  ] Stopped target Preparation for Local File Systems.\n[  OK  ] Stopped target Swaps.\n[  OK  ] Reached target Unmount All Filesystems.\n[  OK  ] Stopped Remount Root and Kernel File Systems.\n[  OK  ] Stopped Create Static Device Nodes in /dev.\n[  OK  ] Reached target System Shutdown.\n[  OK  ] Reached target Late Shutdown Services.\n[  OK  ] Finished System Reboot.\n[  OK  ] Reached target System Reboot.\n[systemd-shutdown] -----------------------------------------------------------------\n[systemd-shutdown] USER\tPID\tPPID\tCMD\n[systemd-shutdown] 0\t1\t0\t/lib/systemd/systemd-shutdown reboot --timeout 90000000us --log-level 6 --dfx-reboot 1 --log-target kmsg --log-color\n[systemd-shutdown] 0\t4992\t1\t(process_status)\n[systemd-shutdown] -----------------------------------------------------------------\n[  310.344452] xhci-hcd xhci-hcd.1.auto: Host halt failed, -110\n[  310.382231] xhci-hcd xhci-hcd.0.auto: Host halt failed, -110\n[  313.047678] reboot: Restarting system\nNOTICE:  watchdog reboot setting success.\n[I][00b2]: 0810\t0x0823af70 0x08235bf0 0x08235bbc 0x08233bc8\n[I][0021]: 0144\t0x00000000 0x08744000 0x0821b259 0x0875e000\n[I][00b1]: 0211\t0x00000006 0x00000004 0x00000005 0x0875e000\n[I][009f]: 0864\t0x00000006 0x00000004 0x00000005 0x08744000\n[W][009f]: 0919\t0x00000001 0x17c00000 0x03e7b351 0x00000002\n[W][009f]: 0988\t0x00000002 0x17c00000 0x03e7b351 0x00000002\n[W][009f]: 1070\t0xffffffea 0x00000004 0x00000005 0x08744000\n[W][009f]: 0919\t0x00000001 0x17c00000 0x03e7b351 0x00000002\n[W][009f]: 0988\t0x00000002 0x17c00000 0x03e7b351 0x00000002\n[W][009f]: 1076\t0xffffffea 0x00000004 0x00000005 0x08744000\n[I][009a]: 0300\t0xe000e114 0x00000000 0x08205405 0x00000000\n[I][00e1]: 0411\t0x0000008f 0x00000000 0x082117eb 0x0000008f\n[I][00e1]: 0515\t0x0000008f 0x0000008f 0x08203887 0x000000f6\n[I][00b2]: 1191\t0x00000000 0xffffffff 0x0821e99d 0x0000008f\n[I][00a5]: 0038\t0x082396f4 0x082346a8 0x00000002 0x0823aa40\n[I][00a5]: 0038\t0x082396f4 0x082346a8 0x00000000 0x0823e800\n[I][00b2]: 0628\t0xffffffff 0xffffffff 0x0821e99d 0x0000008f\n[I][00e1]: 0411\t0x0000008f 0x08237ac8 0x0821169b 0x0821e99d\n[I][00e1]: 0447\t0x0821e99d 0x0821e99d 0x0000008f 0x00000003\n[I][00b2]: 1226\t0x00000000 0xffffffff 0x0821e99d 0x0000008f\n[I][00b2]: 1307\t0x00000000 0xffffffff 0x0821e99d 0x0000008f\n[I][00b2]: 1310\t0x00000001 0xffffffff 0x0821e99d 0x0000008f\n[W][00a1]: 0466\t0x00000000 0x00000000 0xa1740000 0x00000001\n[W][00a1]: 0466\t0x00000000 0x00000000 0xa1740000 0x00000001\n[W][00a1]: 0466\t0x00000000 0x00000000 0xa1740000 0x00000001\n[I][00b2]: 1310\t0x00000002 0xffffffff 0x0821e99d 0x0000008f\n[I][00a5]: 0038\t0x082396f4 0x082346d4 0x00000003 0x0823aa40\n[I][00b2]: 1310\t0x00000003 0xffffffff 0x0821e99d 0x0000008f\n[I][00b2]: 0679\t0x00000001 0xffffffff 0x0821e99d 0x0000008f\n[I][00b2]: 1310\t0x00000004 0xffffffff 0x0821e99d 0x0000008f\n[I][00e1]: 0411\t0x0000008f 0x08237ac8 0x0821169b 0x0821e99d\n[I][00e1]: 0447\t0x0821e99d 0x0821e99d 0x0000008f 0x00000003\n[I][00b2]: 1338\t0x00000000 0xffffffff 0x0821e99d 0x0000008f\nSerial Probe!\n66\nU-Boot Runing...\n\nBoot Strap:0000FAFE\nReboot Control:00000001\nBoot from Area 0(boot_cnt0[3] boot_cnt1[0])\nSerial Probe!\n66Core:  4 devices, 4 uclasses\nMMC:   \nLoading Environment from nowhere... OK\nIn:    serial\nOut:   serial\nErr:   serial\nNet:   eth0: hi1711_gmac\nHit 'ctrl + b' to stop autoboot:  0 \nblk_probe\ndetect ext4img info: block cnt:385024,block size:1024\nlog2blksz 10\n3486784 bytes read in 202 ms (16.5 MiB/s)\n13278 bytes read in 9 ms (1.4 MiB/s)\n5242880 bytes read in 300 ms (16.7 MiB/s)\n## Booting kernel from Legacy Image...\n   Image Name:   linux\n   Image Type:   Linux Kernel Image (uncompressed)\n   Verifying Checksum ... OK\n## Flattened Device Tree blob.\n   Booting using the fdt blob.\nWorking FDT set to 87400000\n   Loading Kernel Image to 87480000\n   Using Device Tree in place.\nWorking FDT set to 87400000\nfdt_fix_memory_prop: vce_flag is 0 (SYSCTRL_INITIAL_INF: 0xbfefffff)\nboot NOTICE:  Before BL31 init mmu\nNOTICE:  ddr_size=0x3\nNOTICE:  BL31 init mmu done\nNOTICE:  BL31: v0.00:0\nNOTICE:  BL31: Built : 19:10:04, 19:10:04\nNOTICE:  fiq init done !\nUncompressing... done, booting...\n[    0.779859] **** Total Boot time: 779 ms, uncompress initrd cost 227 ms ****\n[ 0.780455] 1970-01-01 00:00:00 [AT]mount ...\nrootfstype=ext4\nextroot=/dev/nvm_active\nextinit=/sbin/init\n[ 0.811903] 1970-01-01 00:00:00 [FT] now execute /sbin/init\n[ 0.827080] 1970-01-01 00:00:00 [AT]insmod...\n[    0.968397] [RTOS fiq]@@ register fiq\n[ 1.078913] 1970-01-01 00:00:01 insmod success!\n[ 1.094022] 1970-01-01 00:00:01 [AT]create node...\n[ 1.797945] 1970-01-01 00:00:01 check gpp0-2 loop_cnt = 0\n/dev/mmcblk0gp2\n/dev/mmcblk0gp0\n/dev/mmcblk0gp1\n[ 1.905117] 1970-01-01 00:00:01 [AT]mount partitions...\n[ 1.961599] 1970-01-01 00:00:01 [AT]switch to second rootfs...\n\nWelcome to RTOS 208.8.1 arm64le-preempt-pro-5.10!",
    "topic_user_name": "livein2ndworld",
    "best_answer_url": "/t/topic/1980/3",
    "reply_posts": [
        {
            "user_name": "chenghaoyang",
            "topic_closed": true,
            "is_solution": false,
            "post_url": "/t/topic/1980/2",
            "text": "看下framework.log是否因组件异常导致maca重拉，maca重拉多次依然异常后会重启BMC\n如果是因为组件异常导致，可以通过修改/opt/bmc/conf/mc_control.json内的检查项全为false关闭maca健康状态检查"
        },
        {
            "user_name": "Gendany",
            "topic_closed": true,
            "is_solution": true,
            "post_url": "/t/topic/1980/3",
            "text": ".\\ipmitool.exe -H 192.168.2.100  -I lanplus -p 623 -C 17 mc watchdog off 关闭的看门狗是BMC作为业务侧OS的看门狗功能，并不是BMC小系统自身的看门狗\n从日志上看是由于组件my_app未正常启动，maca尝试重拉后仍然无法正常启动，执行系统复位自愈流程导致的BMC复位\nrecheck startup status completely, total components count: 47, normal count: 46, abnormal components: [my_app]\nmaca 1.70.3及以上版本的调试包，可以在BMC启动启动后，执行自愈复位前\n进入mdbctl调试命令行界面，执行以下命令关闭maca的组件启动状态检查和运行状态检查：\nattach maca\nsetmonitorstatus starting false\nsetmonitorstatus running false"
        },
        {
            "user_name": "livein2ndworld",
            "topic_closed": true,
            "is_solution": false,
            "post_url": "/t/topic/1980/4",
            "text": "确实是my_app组件的原因，去掉之后不会重启了，谢谢指导！"
        },
        {
            "user_name": "livein2ndworld",
            "topic_closed": true,
            "is_solution": false,
            "post_url": "/t/topic/1980/5",
            "text": "请问怎么能进入mdbctl调试命令行界面，ssh上可以操作吗"
        },
        {
            "user_name": "Ocy",
            "topic_closed": true,
            "is_solution": false,
            "post_url": "/t/topic/1980/6",
            "text": "ssh进入后可以直接输入mdbctl进入调试命令行界面"
        },
        {
            "user_name": "livein2ndworld",
            "topic_closed": true,
            "is_solution": false,
            "post_url": "/t/topic/1980/7",
            "text": "好的，已经成功关闭了，谢谢！"
        }
    ]
}