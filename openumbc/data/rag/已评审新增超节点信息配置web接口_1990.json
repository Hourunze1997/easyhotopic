{
    "topic_id": 1990,
    "question": "【已评审】新增超节点信息配置web接口 - content: 决策点1：webrest接口评审\n评审背景\n新增webrest接口 便于用户通过web查询超节点属性\n\n项\n取值\n\nURI\n/UI/Rest/System/SuperPodOptions\n\n接口类型\nGET\n\n变化类型\n新增接口\n\n接口说明\n超节点信息查询接口\n\n接口下新增相应属性\n\n属性名称\n变化类型\n属性说明\n数据类型\n约束\n\nSuperPodId\n新增属性\n超节点ID （超节点所有机框使用的ID）\ninteger\n1-xxx\n\nServerIndex\n新增属性\n节点内的计算节点ID编号\ninteger\n0-xxx\n\nSuperPodSize\n新增属性\n节点规模  （NPU个数）\ninteger\n1-xxx\n\nChassisId\n新增属性\n节点机框号（框内所有节点共享）\ninteger\n1-xxx\n\nTopologyType\n新增属性\n节点拓扑类型 （如 8P拓扑 指单台服务器）\ninteger\n0-xxx\n\nInterconType\n新增属性\n节点互联类型（如何实现最终拓扑 通过交换/DPU实现互联）\ninteger\n0-xxx\n\nPresentDPUCount\n新增属性\n物理在位的DPU网卡数量\ninteger\n0-xxx\n\nNPUBootOption\n新增属性\nNPU启动方式  （CDMA/PXE）\ninteger\n0-xxx\n\nUBManagedBy\n新增属性\nUB管理方式     (带内host管理/带外 华为云)\ninteger\n0-xxx\n\n接口对应响应体举例\n{\n    \"SuperPodLabel\": {\n        \"SuperPodId\": 1235,\n        \"ServerIndex\": 0,\n        \"SuperPodSize\": 128,\n        \"TopologyType\": 0,\n        \"InterconType\": 1,\n        \"PresentDPUCount\": 16,\n        \"BootOption\": 0,\n        \"UBManagedBy\": 0,\n        \"ChassisId\": 0\n    }\n}\n\n新增webrest接口 便于用户通过web配置超节点属性\n\n项\n取值\n\nURI\n/UI/Rest/System/SuperPodOptions\n\n接口类型\nPATCH\n\n变化类型\n新增接口\n\n接口说明\n超节点信息配置接口\n\n接口下可配置相应属性\n\n属性名称\n变化类型\n属性说明\n数据类型\n约束\n\nSuperPodId\n新增属性\n超节点ID （超节点所有机框使用的ID）\ninteger\n1-xxx\n\nServerIndex\n新增属性\n节点内的计算节点Id编号\ninteger\n0-xxx\n\nSuperPodSize\n新增属性\n节点规模  （NPU个数）\ninteger\n1-xxx\n\nChassisId\n新增属性\n节点机框号（框内所有节点共享）\ninteger\n1-xxx\n\nTopologyType\n新增属性\n节点拓扑类型 （如 8P拓扑 指单台服务器）\ninteger\n0-3xxx\n\nInterconType\n新增属性\n节点互联类型（如何实现最终拓扑 通过交换/DPU实现互联）\ninteger\n0-xxx\n\nPresentDPUCount\n新增属性\n物理在位的DPU网卡数量\ninteger\n0-xxx\n\nNPUBootOption\n新增属性\nNPU启动方式  （CDMA/PXE）\ninteger\n0-xxx\n\nUBManagedBy\n新增属性\nUB管理方式     (带内host管理/带外 华为云)\ninteger\n0-xxx\n\n接口对应请求体举例\n{\n    \"SuperPodLabel\": {\n        \"SuperPodId\": 1235,\n        \"ServerIndex\": 0,\n        \"SuperPodSize\": 128,\n        \"TopologyType\": 0,\n        \"InterconType\": 1,\n        \"PresentDPUCount\": 16,\n        \"BootOption\": 0,\n        \"UBManagedBy\": 0,\n        \"ChassisId\": 0\n    }\n}\n\n新增webrest接口 便于用户通过web还原超节点属性\n\n项\n取值\n\nURI\n/UI/Rest/System/SuperPodOptions/RevokeSettings\n\n接口类型\nPOST\n\n变化类型\n新增接口\n\n接口说明\n超节点信息配置还原接口\n\n请求消息体\n{}\n\n请求响应体\n{}\n\n决策点2：修改SuperPodLabel超节点信息emitchange属性\n当前部分超节点配置在产业仓实现 需要监听chassis下超节点信息变化情况 修改emitchange属性\npath: /bmc/kepler/Chassis/1/SuperPodLabel\ninterface: bmc.kepler.Chassis.SuperPodLabel\n\n属性名称\n变化类型\n签名\n读写&权限\n持久化\n变化通知\n接口说明\n默认值\n\nSuperPodId\n修改属性\nq\nR：ReadOnly\n掉电持久化\n由false变化为true\n超节点内部各个节点Id\n0xffff\n\nServerIndex\n修改属性\ny\nR：ReadOnly\n掉电持久化\n由false变化为true\n节点os编号\n65535\n\nSuperPodSize\n修改属性\ny\nR：ReadOnly\n掉电持久化\n由false变化为true\n超节点规模\n65535\n\n决策点3：web前端页面评审\n在系统管理页签下新增超节点配置项\nPixPin_2025-07-28_10-05-231051×665 71.7 KB\n选项为\n\n属性名称\n默认值\n选项类型\n是否可配置\n是否存在提示按钮\n\n超节点编号\n使用后端传入参数显示\n用户输入\n是\n是\n\n超节点规模\n使用后端传入参数显示\n用户输入\n是\n是\n\n超节点机框号\n使用后端传入参数显示\n用户输入\n是\n是\n\n超节点拓扑\n使用后端传入参数显示\n下拉框\n是\n是\n\n超节点互联类型\n使用后端传入参数显示\n下拉框\n是\n是\n\n超节点DPU数量\n使用后端传入参数显示\n下拉框\n是\n是\n\n超节点计算节点Id编号\n使用后端传入参数显示\n用户输入\n是\n是\n\n超节点NPU启动模式\n使用后端传入参数显示\n下拉框\n是\n是\n\n超节点UB管理模式\n使用后端传入参数显示\n按钮点选\n是\n是\n\n新增按钮 保存设置、恢复默认设置\n\n新增按钮\n使用接口\n传参\n类型\n\n保存\n/UI/Rest/System/SuperPodOptions\n上述选项参数\nPATCH\n\n恢复默认配置\n/UI/Rest/System/SuperPodOptions/RevokeSettings\n{}\nPOST\n\n评审结论\n决策点1和决策点3未通过 决策点2通过\nlinks: #p-4893-h-1, https://discuss.openubmc.cn/uploads/default/original/2X/e/edaf95089836628e5ce0f37dae9fe57518593b5e.png, #p-4893-h-2",
    "topic_user_name": "liumengda",
    "best_answer_url": "",
    "reply_posts": []
}