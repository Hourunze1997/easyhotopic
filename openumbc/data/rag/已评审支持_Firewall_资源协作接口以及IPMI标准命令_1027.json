{
    "topic_id": 1027,
    "question": "【已评审】支持 Firewall 资源协作接口以及IPMI标准命令 - content: 关联issue\n支持IPMI规范的 Firewall 中添加/删除/查询白名单\n评审背景\n客户对于 IPMI 规范的 Firmware Firewall 命令需要支持，并且需要支持在其他非IPMI的北向接口进行查询和设置。\n差距\n\n当前BMC不支持 IPMI 规范的 Firmware Firewall 命令\n当前BMC不支持  IPMI 规范的 Firmware Firewall 白名单的管理接口\n\n评审点\n评审点1\nBMC新增 IPMI 规范的 Firmware Firewall 命令，具体的IPMI命令请见 IPMI 2.0规范 章节 18 & 21。本次评审的IPMI命令如下：\n备注： 由于新增的IPMI命令是规范的，因此命令文档请求体和响应体不再评审点中，具体可以参考上述规范。\n\nIPMI命令\n角色权限\n对应规范章节\nNetFN\nCmd\n\nGet NetFn Support Command\nUser\n21.2\nApp 06h\n09h\n\nGet Command Support Command\nUser\n21.3\nApp 06h\n0Ah\n\nGet Configurable Commands Command\nUser\n21.5\nApp 06h\n0Ch\n\nSet Command Enables Command\nAdministrator\n21.7\nApp 06h\n60h\n\nGet Command Enables Command\nUser\n21.8\nApp 06h\n61h\n\n评审点2\nBMC新增  IPMI 规范的 Firmware Firewall 白名单的管理接口。具体的接口新增在如下资源和接口下：\npath：/bmc/kepler/IpmiService\ninterface：bmc.kepler.IpmiService.Firewall\n新增接口1：AddWhiteList\n\n项\n取值以及说明\n\n方法名称\nAddWhiteList\n\n方法描述\n增加 IPMI Firewall 白名单，当前仅支持标准IPMI命令\n\n方法权限\nUserMgmt（和对应的IPMI命令Enable操作对齐）\n\n请求签名\nya{yay}\n\n请求参数\nNetFN：uint8 类型，表征添加白名单的网络功能码，取值范围[0, 64]，必填参数CmdList：array<uint8> 类型，表征添加白名单的命令列表，每个元素的取值范围 [0, 255]，可选参数，如果长度为空则添加NetFN下的所有命令SubFunctionList：array<uint8> 类型，表征添加白名单的命令列表，每个元素的取值范围 [0, 63]，可选参数，如果长度为空则添加的NetFN和CmdList的交集下的所有命令\n\n响应签名\n无\n\n响应参数\n无，添加成功之后不会返回任何数据，添加失败之后会返回error引擎\n\n新增接口2：RemoveWhiteList\n\n项\n取值以及说明\n\n方法名称\nRemoveWhiteList\n\n方法描述\n删除 IPMI Firewall 白名单，当前仅支持标准IPMI命令\n\n方法权限\nUserMgmt（和对应的IPMI命令Disable操作对齐）\n\n请求签名\nya{yay}\n\n请求参数\nNetFN：uint8 类型，表征删除白名单的网络功能码，取值范围[0, 64]，必填参数CmdList：array<uint8> 类型，表征删除白名单的命令列表，每个元素的取值范围 [0, 255]，可选参数，如果长度为空则删除NetFN下的所有的命令SubFunctionList：array<uint8> 类型，表征删除白名单的命令列表，每个元素的取值范围 [0, 63]，可选参数，如果长度为空则删除NetFN和CmdList的交集下的所有命令\n\n响应签名\n无\n\n响应参数\n无，删除成功之后不会返回任何数据，删除失败之后会返回error引擎\n\n新增接口3：GetWhiteList\n\n项\n取值以及说明\n\n方法名称\nGetWhiteList\n\n方法描述\n查询 IPMI Firewall 白名单列表，当前仅支持标准IPMI命令\n\n方法权限\nReadOnly\n\n请求签名\n无\n\n请求参数\n无\n\n响应签名\na{ya{yay}}\n\n响应参数\n查询失败之后会返回error引擎，查询成功时返回参数如下：NetFN：uint8 类型，表征删除白名单的网络功能码，取值范围[0, 64]，必填参数CmdList：array<uint8> 类型，表征删除白名单的命令列表，每个元素的取值范围 [0, 255]，可选参数，如果长度为空则删除NetFN下的所有的命令SubFunctionList：array<uint8> 类型，表征删除白名单的命令列表，每个元素的取值范围 [0, 63]，可选参数，如果长度为空则删除NetFN和CmdList的交集下的所有命令\n\n评审结论\n\n评审点1：通过，同意新增下述IPMI命令：\n(1) Get NetFn Support Command\n(2) Get Command Support Command\n(3) Get Configurable Commands Command\n(4) Set Command Enables Command\n(5) Get Command Enables Command\n评审点2：通过，同意在 bmc.kepler.IpmiService.Firewall 下新增下述方法：\n(1) RemoveWhiteList，请求签名：ya{yay}，响应签名：无，权限：UserMgmt\n(2) RemoveWhiteList，请求签名：ya{yay}，响应签名：无，权限：UserMgmt\n(3) GetWhiteList，请求签名：无，响应签名：a{ya{yay}}，权限：ReadOnly\nlinks: #p-2177-issue-1, https://gitcode.com/openUBMC/mdb_interface/issues/75, #p-2177-h-2, #p-2177-h-3, #p-2177-h-1-4, https://www.intel.cn/content/www/cn/zh/products/docs/servers/ipmi/ipmi-second-gen-interface-spec-v2-rev1-1.html, #p-2177-h-2-5, #p-2177-h-6",
    "topic_user_name": "pengqiang",
    "best_answer_url": "",
    "reply_posts": [
        {
            "user_name": "huanghan",
            "topic_closed": null,
            "is_solution": false,
            "post_url": "/t/topic/1027/2",
            "text": ""
        }
    ]
}