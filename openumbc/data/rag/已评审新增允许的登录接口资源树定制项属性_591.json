{
    "topic_id": 591,
    "question": "【已评审】新增允许的登录接口资源树/定制项属性 - content: ISSUE链接：\n【平台】提供禁止创建特定登录接口用户的能力-account-GitCode\n背景:\n支持部分客户禁止创建含有指定登录接口用户的诉求:\n某客户要求对ssh,串口用户独立管理,禁止其他用户开启ssh/串口\n决策点：\n\n资源协作接口: bmc.kepler.AccountService.AccountPolicy接口新增AllowedLoginInterfaces属性；\n资源协作接口: bmc.kepler.AccountService.RemoteGroups接口新增AllowedLoginInterfaces属性；\n新增定制项BMCSet_LocalAccountAllowedLoginInterfaces、BMCSet_RemoteGroupAllowedLoginInterfaces；\nweb-rest AdvancedSecurity接口新增属性对象:AllowedLoginInterfaces, 对象字段:LocalAccount, RemoteGroup；\n\n详细描述：\n一、资源协作接口: bmc.kepler.AccountService.AccountPolicy接口新增AllowedLoginInterfaces属性:\n资源路径: /bmc/kepler/AccountService/AccountPolicies/Local\n资源接口: bmc.kepler.AccountService.AccountPolicy\n应用场景: 本地用户允许开启的登录接口\n\n属性名称\n变化类型\n签名\n读写&权限\n持久化\n变化通知\n接口说明\n接口约束\n\nAllowedLoginInterfaces\n新增属性\nas\nR:ReadOnlyW:UserMgmt\n掉电持久化\nfalse\n允许用户开启的登录接口字符串数组\n取值类型: 字符串数组,[color=#ff0000]至少含有一个元素,且不能只有SFTP[/color]设置为空表时报错:ArrayPropertyInvalidItem取值范围:WebSNMPIPMISSHSFTPLocalRedfish\n\n二、bmc.kepler.AccountService.RemoteGroups接口新增AllowedLoginInterfaces属性：\n新增资源Path： /bmc/kepler/AccountService/RemoteGroups\n资源Interface： bmc.kepler.AccountService.RemoteGroups\n应用场景: 远程用户组允许开启的登录接口\n\n属性名称\n变化类型\n签名\n读写&权限\n持久化\n变化通知\n接口说明\n接口约束\n\nAllowedLoginInterfaces\n新增属性\nas\nR:ReadOnlyW:UserMgmt\n掉电持久化\nfalse\n允许远程用户组开启的登录接口字符串数组\n取值类型: 字符串数组,[color=#ff0000]至少含有一个元素[/color]设置为空表时报错:ArrayPropertyInvalidItem取值范围:WebSSHRedfish\n\n三、新增定制项\n定制化项名称： BMCSet_LocalAccountAllowedLoginInterfaces：允许本地用户开启的登录接口 BMCSet_RemoteGroupAllowedLoginInterfaces：允许远程用户组开启的登录接口\n\n定制化项名称\n定制化项\n归属组件\n取值说明\n默认值\n处理逻辑（伪代码）\n说明\n实现方式（配置文件导入、IPMI命令)\n\n允许本地用户开启的登录接口\nBMCSet_LocalAccountAllowedLoginInterfaces\naccount\n数字U8, 接口值按位相加:Web:1SNMP:2IPMI:4SSH:8SFTP:16Local:64Redfish:128\n223  if(BMCSet_XXXAllowedLoginInterfaces == 空)value = 默认值End设置属性AllowedLoginInterface为value的值\n允许远程用户组开启的登录接口,至少含有一个接口,且不能只有SFTP\n配置文件导入\n\n允许远程用户组开启的登录接口\nBMCSet_RemoteGroupAllowedLoginInterfaces\niam\n数字U8, 接口值按位相加:Web:1SSH:8Redfish:128\n137\n允许远程用户组开启的登录接口,至少含有一个接口\n配置文件导入\n\n四、web-rest新增属性\nuri： /UI/Rest/AccessMgnt/AdvancedSecurity\n变化类型： 新增属性\n操作类型： GET\n应用场景： 前端查询允许的登录接口，决定页面展示的登录接口\n\n属性名称\n取值类型\n取值范围\n默认值\n操作权限\n约束\n\nAllowedLoginInterfaces{\nobject\nNA\nNA\nReadOnly\nNA\n\nLocalAccount\narray\n字符串数组：Web、SNMP、IPMI、SSH、SFTP、Local、Redfish\n[“Web”, “SNMP”,“IPMI”, “SSH”, “SFTP”, “Local”, “Redfish”]\nReadOnly\nNA\n\nRemoteGroup\narray\n字符串数组：Web、SSH、Redfish\n[“Web”, “SSH”, “Redfish”]\nReadOnly\nNA\n\n}\n\n评审结论\n决策点1：通过\n1） 同意bmc.kepler.AccountService.AccountPolicy接口新增AllowedLoginInterfaces属性\n决策点2：通过\n1） 同意bmc.kepler.AccountService.RemoteGroups接口新增AllowedLoginInterfaces属性\n决策点3： 通过\n1） 同意新增定制项BMCSet_LocalAccountAllowedLoginInterfaces、BMCSet_RemoteGroupAllowedLoginInterfaces；\n决策点4： 通过\n1）同意在/UI/Rest/AccessMgnt/AdvancedSecurity接口下新增AllowedLoginInterfaces属性对象\nlinks: #p-1159-issue-1, https://gitcode.com/openUBMC/account/issues/7, #p-1159-h-2, #p-1159-h-3, #p-1159-h-4, #p-1159-bmckepleraccountserviceaccountpolicyallowedlogininterfaces-5, #p-1159-bmckepleraccountserviceremotegroupsallowedlogininterfaces-6, #p-1159-h-7, #p-1159-web-rest-8, #p-1159-h-9",
    "topic_user_name": "fangyufan",
    "best_answer_url": "",
    "reply_posts": []
}