{
    "topic_id": 1320,
    "question": "ACCOUNT组件执行集成测试报错 - content: bmcgo 版本为: 0.5.317\n编译容器镜像版本：2503\naccount组件的版本：1.70.22\n执行bingo build命令编译完account组件后，使用bingo test --it --wb报错。\n报错日志如下：\nInstalling (downloading, building) binaries…\nCyrus_SASL/2.1.28-h1.computing.ibmc.r1@hw.ibmc.release/rc: WARN: Build folder is dirty, removing it: /root/.conan/data/Cyrus_SASL/2.1.28-h1.computing.ibmc.r1/hw.ibmc.release/rc/build/6a517c436d4f5a491440e620151be0c0415fc82a\nCyrus_SASL/2.1.28-h1.computing.ibmc.r1@hw.ibmc.release/rc: WARN: Trying to remove corrupted source folder\nCyrus_SASL/2.1.28-h1.computing.ibmc.r1@hw.ibmc.release/rc: WARN: This can take a while for big packages\nCyrus_SASL/2.1.28-h1.computing.ibmc.r1@hw.ibmc.release/rc: Configuring sources in /root/.conan/data/Cyrus_SASL/2.1.28-h1.computing.ibmc.r1/hw.ibmc.release/rc/source\nERROR: Cyrus_SASL/2.1.28-h1.computing.ibmc.r1@hw.ibmc.release/rc: Error in source() method, line 28\ngit.clone(**self.conan_data[“sources”][self.version])\nCalledProcessErrorWithStderr: Command ‘git -c http.sslVerify=false fetch --depth 1 origin “2.1.28-h1.computing.ibmc.r1”’ returned non-zero exit status 128.\n/bin/sh: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)\nfatal: unable to access ‘https://open.codehub.huawei.com/OpenSourceCenter/cyrusimap/cyrus-sasl.git/’: Could not resolve host: open.codehub.huawei.com\nERROR: 执行命令  conan create . account/100.70.22@hw.ibmc.dev/dev -pr:h profile.dt.ini -s build_type=Dt -r ibmc_dev --build=missing -tf None 错误, 日志: /root/.bmcgo_log/bmcgo.log\nERROR: Traceback (most recent call last):\nFile “/usr/local/lib/python3.12/dist-packages/bmcgo/cli/cli.py”, line 355, in run\nreturn method(command_args)\n^^^^^^^^^^^^^^^^^^^^\nFile “/usr/local/lib/python3.12/dist-packages/bmcgo/cli/cli.py”, line 218, in test\ntest.run()\nFile “/usr/local/lib/python3.12/dist-packages/bmcgo/component/test.py”, line 835, in run\nself.build_and_deploy()\nFile “/usr/local/lib/python3.12/dist-packages/bmcgo/component/test.py”, line 263, in build_and_deploy\nself.build.run()\nFile “/usr/local/lib/python3.12/dist-packages/bmcgo/component/build.py”, line 206, in run\ntool.run_command(cmd, show_log=True, timeout=timeout)\nFile “/usr/local/lib/python3.12/dist-packages/bmcgo/utils/tools.py”, line 665, in run_command\nraise e\nFile “/usr/local/lib/python3.12/dist-packages/bmcgo/utils/tools.py”, line 647, in run_command\nret = subprocess.run(command, check=check, timeout=timeout)\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nFile “/usr/lib/python3.12/subprocess.py”, line 571, in run\nraise CalledProcessError(retcode, process.args,\nsubprocess.CalledProcessError: Command ‘[‘conan’, ‘create’, ‘.’, ‘account/100.70.22@hw.ibmc.dev/dev’, ‘-pr:h’, ‘profile.dt.ini’, ‘-s’, ‘build_type=Dt’, ‘-r’, ‘ibmc_dev’, ‘–build=missing’, ‘-tf’, ‘None’]’ returned non-zero exit status 1.\nERROR: Command ‘[‘conan’, ‘create’, ‘.’, ‘account/100.70.22@hw.ibmc.dev/dev’, ‘-pr:h’, ‘profile.dt.ini’, ‘-s’, ‘build_type=Dt’, ‘-r’, ‘ibmc_dev’, ‘–build=missing’, ‘-tf’, ‘None’]’ returned non-zero exit status 1.\nERROR: 请查看日志信息\n浏览器访问https://open.codehub.huawei.com/OpenSourceCenter/cyrusimap/cyrus-sasl.git/显示无法连接\nlinks: https://open.codehub.huawei.com/OpenSourceCenter/cyrusimap/cyrus-sasl.git/, http://open.codehub.huawei.com, https://open.codehub.huawei.com/OpenSourceCenter/cyrusimap/cyrus-sasl.git/%E6%98%BE%E7%A4%BA%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5",
    "topic_user_name": "Limingfeng",
    "best_answer_url": "/t/topic/1320/7",
    "reply_posts": [
        {
            "user_name": "Wuyupeng",
            "topic_closed": true,
            "is_solution": false,
            "post_url": "/t/topic/1320/2",
            "text": "检查一下命令有没有输错：bingo test --it --wb， 这里 it 和 wb 应该是一个 -，现在看到是两个"
        },
        {
            "user_name": "Limingfeng",
            "topic_closed": true,
            "is_solution": false,
            "post_url": "/t/topic/1320/3",
            "text": "content: 换成单个-之后的报错\nroot@4b2dd305c211:/home/limingfeng/openUBMC/account# bingo test -it -wb\n没有启动组件版本分析\n===>>>包名: account/1.70.22@hw.ibmc.dev/dev\n仓库地址为: GitCode - 全球开发者的开源社区,开源代码托管平台\n================================ 构建菜单 ================================\n单元测试(ut):                      False\n集成测试(it):                      True\n覆盖率:                           False\n地址消毒:                          False\n保存包信息到 /home/limingfeng/openUBMC/account/temp/package_info\n================ 开发者测试开始 ================\n================ 测试 account 开始 ================\n集成测试配置: /home/limingfeng/openUBMC/account/test/integration/test_account.conf\nWARN: ===>>>> exception: cannot access local variable ‘process’ where it is not associated with a value\nWARN: ===>>>> 测试: account/1.70.22@hw.ibmc.dev/dev 失败\nlinks: #p-3148-root4b2dd305c211homelimingfengopenubmcaccount-bingo-test-it-wb-account17022hwibmcdevdev-httpsgitcodecomopenubmcaccountgit-ut-false-it-true-false-false-1, https://gitcode.com/openUBMC/account.git"
        },
        {
            "user_name": "Wuyupeng",
            "topic_closed": true,
            "is_solution": false,
            "post_url": "/t/topic/1320/4",
            "text": "这里看下来应该是首次执行导致 temp 下的文件不全。请先去掉 -wb 选项执行 -it 后再使用 -wb 的选项。"
        },
        {
            "user_name": "Limingfeng",
            "topic_closed": true,
            "is_solution": false,
            "post_url": "/t/topic/1320/5",
            "text": "content: 单独执行bingo test -it 后报错日志如下，Could not resolve host: open.codehub.huawei.com\nInstalling (downloading, building) binaries…\nCyrus_SASL/2.1.28-h1.computing.ibmc.r1@hw.ibmc.release/rc: WARN: Build folder is dirty, removing it: /root/.conan/data/Cyrus_SASL/2.1.28-h1.computing.ibmc.r1/hw.ibmc.release/rc/build/6a517c436d4f5a491440e620151be0c0415fc82a\nCyrus_SASL/2.1.28-h1.computing.ibmc.r1@hw.ibmc.release/rc: WARN: Trying to remove corrupted source folder\nCyrus_SASL/2.1.28-h1.computing.ibmc.r1@hw.ibmc.release/rc: WARN: This can take a while for big packages\nCyrus_SASL/2.1.28-h1.computing.ibmc.r1@hw.ibmc.release/rc: Configuring sources in /root/.conan/data/Cyrus_SASL/2.1.28-h1.computing.ibmc.r1/hw.ibmc.release/rc/source\nERROR: Cyrus_SASL/2.1.28-h1.computing.ibmc.r1@hw.ibmc.release/rc: Error in source() method, line 28\ngit.clone(**self.conan_data[“sources”][self.version])\nCalledProcessErrorWithStderr: Command ‘git -c http.sslVerify=false fetch --depth 1 origin “2.1.28-h1.computing.ibmc.r1”’ returned non-zero exit status 128.\n/bin/sh: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)\nfatal: unable to access ‘https://open.codehub.huawei.com/OpenSourceCenter/cyrusimap/cyrus-sasl.git/’: Could not resolve host: open.codehub.huawei.com\nERROR: 执行命令  conan create . account/1.70.22@hw.ibmc.dev/dev -pr:h profile.dt.ini -s build_type=Dt -r ibmc_dev --build=missing -tf None 错误, 日志: /root/.bmcgo_log/bmcgo.log\nERROR: Traceback (most recent call last):\nFile “/usr/local/lib/python3.12/dist-packages/bmcgo/cli/cli.py”, line 355, in run\nreturn method(command_args)\n^^^^^^^^^^^^^^^^^^^^\nFile “/usr/local/lib/python3.12/dist-packages/bmcgo/cli/cli.py”, line 218, in test\ntest.run()\nFile “/usr/local/lib/python3.12/dist-packages/bmcgo/component/test.py”, line 835, in run\nself.build_and_deploy()\nFile “/usr/local/lib/python3.12/dist-packages/bmcgo/component/test.py”, line 263, in build_and_deploy\nself.build.run()\nFile “/usr/local/lib/python3.12/dist-packages/bmcgo/component/build.py”, line 206, in run\ntool.run_command(cmd, show_log=True, timeout=timeout)\nFile “/usr/local/lib/python3.12/dist-packages/bmcgo/utils/tools.py”, line 665, in run_command\nraise e\nFile “/usr/local/lib/python3.12/dist-packages/bmcgo/utils/tools.py”, line 647, in run_command\nret = subprocess.run(command, check=check, timeout=timeout)\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nFile “/usr/lib/python3.12/subprocess.py”, line 571, in run\nraise CalledProcessError(retcode, process.args,\nsubprocess.CalledProcessError: Command ‘[‘conan’, ‘create’, ‘.’, ‘account/1.70.22@hw.ibmc.dev/dev’, ‘-pr:h’, ‘profile.dt.ini’, ‘-s’, ‘build_type=Dt’, ‘-r’, ‘ibmc_dev’, ‘–build=missing’, ‘-tf’, ‘None’]’ returned non-zero exit status 1.\nERROR: Command ‘[‘conan’, ‘create’, ‘.’, ‘account/1.70.22@hw.ibmc.dev/dev’, ‘-pr:h’, ‘profile.dt.ini’, ‘-s’, ‘build_type=Dt’, ‘-r’, ‘ibmc_dev’, ‘–build=missing’, ‘-tf’, ‘None’]’ returned non-zero exit status 1.\nERROR: 请查看日志信息\nlinks: http://open.codehub.huawei.com, https://open.codehub.huawei.com/OpenSourceCenter/cyrusimap/cyrus-sasl.git/, http://open.codehub.huawei.com"
        },
        {
            "user_name": "LiJiang",
            "topic_closed": true,
            "is_solution": true,
            "post_url": "/t/topic/1320/7",
            "text": "content: 执行conan config get  general 查看revisions_enabled 是否为1。 若不是，执行 conan config set general.revisions_enabled=1\n参考 account组件单元测试执行报错 - #11，来自 Larry_Li\nlinks: https://discuss.openubmc.cn/t/topic/1329/11"
        },
        {
            "user_name": "lixiaocan",
            "topic_closed": true,
            "is_solution": false,
            "post_url": "/t/topic/1320/8",
            "text": "遇到点新问题，跑it时，一直卡在KILL self没有退出，有打印报dbus_launch：command not found，请问这咋处理？"
        },
        {
            "user_name": "LiJiang",
            "topic_closed": true,
            "is_solution": false,
            "post_url": "/t/topic/1320/9",
            "text": "ipmitool dbus-x11 libdbus-1-dev dbus 这几个工具是否有安装，没有的话，使用apt install安装下这些工具。"
        },
        {
            "user_name": "lixiaocan",
            "topic_closed": true,
            "is_solution": false,
            "post_url": "/t/topic/1320/10",
            "text": "是的，缺dbus-x11"
        },
        {
            "user_name": "yaoshun",
            "topic_closed": true,
            "is_solution": false,
            "post_url": "/t/topic/1320/11",
            "text": "该问题是否解决，如未解决请提供最新信息"
        },
        {
            "user_name": "xuhaijun",
            "topic_closed": true,
            "is_solution": false,
            "post_url": "/t/topic/1320/12",
            "text": "此帖长时间无跟踪答复，标记为已解决，如有疑问可重新发帖或跟帖。"
        }
    ]
}