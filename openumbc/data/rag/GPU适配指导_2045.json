{
    "topic_id": 2045,
    "question": "GPU适配指导 - content: 接口定义\n以下是GPU类主要的interface包含关系\n    \"path\": \"/bmc/kepler/Systems/:SystemId/Processors/GPU/:ID\",\n    \"interfaces\": [\n        \"bmc.kepler.Systems.Processor\",            -- 描述通用处理器的接口\n        \"bmc.kepler.Systems.Processor.GPU\",        -- 描述GPU特有功能的接口\n        \"bmc.kepler.Systems.Processor.GPU.Status\", -- 描述GPU供电功能的接口\n        \"bmc.kepler.Systems.Processor.GPU.Power\",  -- 描述GPU状态的接口\n        ...\n    ]\n\nbmc.kepler.Systems.Processor\n\n属性\n说明\n建议实现方式\n\nProcessorType\n处理器类型\n对于GPU，在CSR配置为\"2\"\n\nSystemId\n处理器所在系统Id\n默认值1，在CSR配置\n\nId\n处理器Id\n默认值1，在CSR配置\n\nName\n名称\n根据需求在CSR配置\n\nPresence\n在位\n默认值1，在CSR配置\n\nInstructionSet\n指令集\n当前未应用，推荐在CSR配置\n\nArchitecture\n芯片架构\n当前未应用，推荐在CSR配置\n\nManufacturer\n厂商\n根据需求在CSR配置\n\nFamily\n家族\n当前未应用，推荐在CSR配置\n\nModel\n型号\n根据需求在CSR配置\n\nPartNumber\n部件号\n一般需要通过GPU带外管理协议获取。注意这是处理器的部件号，不是GPU卡的。\n\nSN\n序列号\n一般需要通过GPU带外管理协议获取\n\nFirmwareVersion\n固件版本\n一般需要通过GPU带外管理协议获取\n\nSocketDesignation\n槽位\n默认值\"1\"，在CSR配置\n\nPosition\n位置\n配成PCIe Riser${Slot}\n\nThermalTrip\n过热保护状态\nGPU不涉及\n\nHealth\n健康状态\n关联Component_PCIeCard的Health属性\n\nReplaceable\n是否可以作为独立的部件进行替换\n对于GPU已在model.json配置默认值为true\n\nbmc.kepler.Systems.Processor.GPU\n\n属性\n说明\n建议实现方式\n\nInfoRomVersion\nInfoRom版本\n属性源于NVIDIA的GPU，若不涉及可不实现\n\nSlot\n槽位号\n同步PCIeDevice_1的SlotID属性\n\nVendorID\n厂商ID\n根据需求在CSR配置\n\nDeviceID\n设备ID\n根据需求在CSR配置\n\nSubVendorID\n子厂商ID\n根据需求在CSR配置\n\nSubDeviceID\n子设备ID\n根据需求在CSR配置\n\nGPUUtilization\nGPU利用率\n属性源于NVIDIA的GPU，若不涉及可不实现\n\nMemoryUtilization\n内存利用率\n属性源于NVIDIA的GPU，若不涉及可不实现\n\nBoardPartNumber\n单板部件号\n属性源于NVIDIA的GPU，若不涉及可不实现\n\nMemoryVendor\n内存厂商\n属性源于NVIDIA的GPU，若不涉及可不实现\n\nMemoryPartNumber\n内存部件号\n属性源于NVIDIA的GPU，若不涉及可不实现\n\nBuildDate\n构建日期\n属性源于NVIDIA的GPU，若不涉及可不实现\n\nUUID\n通用唯一标识符\n属性源于NVIDIA的GPU，若不涉及可不实现\n\nPrimaryGPUTemperatureCelsius\n主处理器温度\n属性源于NVIDIA的GPU，若不涉及可不实现\n\nbmc.kepler.Systems.Processor.GPU.Status\n\n属性\n说明\n建议实现方式\n\nECCModeEnabled\nECC模式当前使能状态\n属性源于NVIDIA的GPU，若不涉及可不实现\n\nECCModePendingEnabled\nECC模式重启后使能状态\n属性源于NVIDIA的GPU，若不涉及可不实现\n\nResetRequired\n是否需要重启\n属性源于NVIDIA的GPU，若不涉及可不实现\n\nDoubleBitErrorPageCount\n双bit失效故障页个数\n属性源于NVIDIA的GPU，若不涉及可不实现\n\nSingleBitErrorPageCount\n单bit失效故障页个数\n属性源于NVIDIA的GPU，若不涉及可不实现\n\nNvLinkInfo\nNvLink信息\n属性源于NVIDIA的GPU，若不涉及可不实现\n\nbmc.kepler.Systems.Processor.GPU.Power\n\n属性\n说明\n建议实现方式\n\nPowerWatts\n功率\n属性源于NVIDIA的GPU，若不涉及可不实现\n\nPowerBrakeSet\npower brake状态\n属性源于NVIDIA的GPU，若不涉及可不实现\n\nExternalPowerSufficient\n外部供电是否充足\n属性源于NVIDIA的GPU，若不涉及可不实现\n\n协议实现\n从资源协作接口的定义可以看到，实际上若非NVIDIA的GPU，需要适配的功能点实际上很少\nNVIDIA的GPU\n\nNVIDIA的GPU支持自定义的带外管理协议，即SMBus Post Box Interface（SMBPBI）。当前openUBMC已支持，新增NVIDIA的GPU时，理论上只需增加配置文件即可。详情可参考general_hardware仓的Tesla_T4.lua\n注意CSR配置的Model字段要与配置文件名称相匹配\n\n非NVIDIA的GPU\n\n除在CSR配死的字段外，重点应当关注温度、功耗、序列号、固件版本、部件号。温度、功耗影响整机散热策略设计，序列号、固件版本、部件号影响部件资产管理\n如果需要实现新的带外管理协议，需要修改general_hardware组件代码，注意避免执行NVIDIA GPU的代码流程\n目前，新的部件驱动规范正在制定当中，GPU卡作为首批落地的部件，将会很快启用新的适配流程，欢迎社区的伙伴们提出宝贵的意见和建议\n【公示中】GPU卡驱动规范\nlinks: #p-5065-h-1, #p-5065-bmckeplersystemsprocessor-2, #p-5065-bmckeplersystemsprocessorgpu-3, #p-5065-bmckeplersystemsprocessorgpustatus-4, #p-5065-bmckeplersystemsprocessorgpupower-5, #p-5065-h-6, #p-5065-nvidiagpu-7, #p-5065-nvidiagpu-8, https://discuss.openubmc.cn/t/topic/1735",
    "topic_user_name": "Yelvsub",
    "best_answer_url": "",
    "reply_posts": []
}