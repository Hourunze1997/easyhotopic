{
    "topic_id": 582,
    "question": "构建 mdb_interface 时提示 Cannot found lua-format - content: 背景\n基于最新 manifest 的dockerfile构建来容器\n“bingo”版本：0.5.317\nmdb_interface/1.70.99@openUBMC.release/rc\n问题现象\n构建 mdb_interface 时提示：\nCannot found lua-format, please re-initialize your workspace.\n\nimage1390×472 63.8 KB\n初步分析\n\n在/usr/local/bin/下有lua-format\n\nll /usr/local/bin/\ntotal 119872\ndrwxr-xr-x 1 root root     4096 Apr 18 08:47 ./\ndrwxr-xr-x 1 root root     4096 Apr 18 06:49 ../\ndrwxr-xr-x 2 root root     4096 Apr 18 06:43 __pycache__/\n-rwxr-xr-x 1 root root    47920 Apr  2 01:16 acxmlgenerator*\n-rwxr-xr-x 1 root root      208 Apr 18 08:47 bingo*\n-rwxr-xr-x 1 root root   151990 Apr 18 06:43 bottle.py*\n-rwxr-xr-x 1 root root     4201 Apr  2 01:16 cms_sign_hpm.sh*\n-rwxr-xr-x 1 root root      209 Apr 18 06:44 conan*\n-rwxr-xr-x 1 root root      222 Apr 18 06:44 conan_build_info*\n-rwxr-xr-x 1 root root      216 Apr 18 06:44 conan_server*\n-rwxr-xr-x 1 root root    57976 Apr  2 01:16 converfile*\n-rwxr-xr-x 1 root root     1982 Apr  2 01:15 convert_onboard_bma.sh*\n-rwxr-xr-x 1 root root     2997 Apr  2 01:15 convert_onboard_sp.sh*\nlrwxrwxrwx 1 root root       45 Apr 18 06:49 corepack -> ../lib/node_modules/corepack/dist/corepack.js*\n-rwxr-xr-x 1 root root  5140608 Apr  2 01:16 crypto_tool*\n-rwxr-xr-x 1 root root      212 Apr 18 06:44 distro*\n-rwxr-xr-x 1 root root    73696 Apr  2 01:16 efuse_tool*\n-rwxr-xr-x 1 root root    99184 Apr  2 01:16 efuse_tool_1712*\n-rw-r--r-- 1 root root     1417 Apr  2 01:16 emmc_header.config\n-rw-r--r-- 1 root root     1417 Apr  2 01:16 emmc_header_1712.config\n-rw-r--r-- 1 root root      951 Apr  2 01:16 emmc_uboot_header.config\n-rw-r--r-- 1 root root      951 Apr  2 01:16 emmc_uboot_header_1712.config\n-rwxr-xr-x 1 root root    51632 Apr  2 01:16 filesizecheck*\n-rwxr-xr-x 1 root root  5850104 Apr 18 06:35 flatc*\n-rwxr-xr-x 1 root root     1167 Apr  2 01:16 get_img_parma_area.sh*\n-rwxr-xr-x 1 root root    56984 Apr  2 01:16 gpp_header*\n-rw-r--r-- 1 root root     1420 Apr  2 01:16 hpm_header.config\n-rw-r--r-- 1 root root     1522 Apr  2 01:16 hpm_header_1712.config\n-rwxr-xr-x 1 root root  5320352 Apr  2 01:16 hpm_signer*\n-rwxr-xr-x 1 root root  5285360 Apr  2 01:16 hpm_verify*\n-rwxr-xr-x 1 root root    65776 Apr  2 01:16 hpmimage*\n-rwxr-xr-x 1 root root      213 Apr 18 06:44 jsonschema*\n-rwxr-xr-x 1 root root  1905256 Apr 18 06:49 lua-format*\n-rwxr-xr-x 1 root root      313 Apr  2 01:15 luajit2luac.sh*\n-rwxr-xr-x 1 root root    36152 Apr  2 01:16 make_emmc_flash_bin*\n-rwxr-xr-x 1 root root     5814 Apr  2 01:16 make_emmc_gpp.sh*\n-rwxr-xr-x 1 root root     1323 Apr  2 01:16 make_linx_gpp.sh*\n-rwxr-xr-x 1 root root     1329 Apr  2 01:16 make_uboot_img.sh*\n-rwxr-xr-x 1 root root      213 Apr 18 06:44 mako-render*\n-rwxr-xr-x 1 root root      219 Apr 18 06:44 meson*\n-rwxr-xr-x 1 root root     1095 Apr  2 01:16 mkhpm.sh*\nlrwxrwxrwx 1 root root       27 Apr 18 06:49 n -> ../lib/node_modules/n/bin/n*\n-rwxr-xr-x 1 root root 98422312 Apr 18 06:49 node*\n-rwxr-xr-x 1 root root      226 Apr 18 06:44 normalizer*\nlrwxrwxrwx 1 root root       38 Apr 18 06:49 npm -> ../lib/node_modules/npm/bin/npm-cli.js*\nlrwxrwxrwx 1 root root       38 Apr 18 06:49 npx -> ../lib/node_modules/npm/bin/npx-cli.js*\n-rwxr-xr-x 1 root root      215 Apr 18 06:43 pygmentize*\n-rwxr-xr-x 1 root root      238 Apr 18 06:44 pyi-archive_viewer*\n-rwxr-xr-x 1 root root      233 Apr 18 06:44 pyi-bindepend*\n-rwxr-xr-x 1 root root      236 Apr 18 06:44 pyi-grab_version*\n-rwxr-xr-x 1 root root      232 Apr 18 06:44 pyi-makespec*\n-rwxr-xr-x 1 root root      235 Apr 18 06:44 pyi-set_version*\n-rwxr-xr-x 1 root root      249 Apr 18 06:44 pyinstaller*\n-rwxr-xr-x 1 root root      207 Apr 18 06:43 tqdm*\n\n在init.py文件中的lua-format的配置过程\n\n初步尝试\n将lua-format拷贝到/usr/bin/\ncp  /usr/local/bin/lua-format /usr/bin/\n\n经过测试，拷贝后就能够构建 mdb_interface 成功\n总结\n临时方案：将lua-format从/usr/local/bin/拷贝到/usr/bin/\n问题原因？\n1、 init.py 将lua-format复制到了错误的地址？\n2、mdb_interface/1.70.99 的版本使用了lua-format固定地址？\n3、bingo 版本问题？\nlinks: #p-1125-h-1, #p-1125-h-2, https://forum.openubmc.cn/uploads/default/original/1X/9766f3bf189fe85bffb21f549d78f0be69c63f9c.png, #p-1125-h-3, #p-1125-h-4, #p-1125-h-5",
    "topic_user_name": "易重辉",
    "best_answer_url": "",
    "reply_posts": [
        {
            "user_name": "LiJiang",
            "topic_closed": null,
            "is_solution": false,
            "post_url": "/t/topic/582/2",
            "text": "问题原因：  init.py 将lua-format 复制到了错误的地址 和 mdb_interface 使用了固定地址，导致不匹配 。\n当前请使用临时解决方案： 将lua-format 从/usr/local/bin/ 拷贝到/usr/bin/\n后续解决措施：1. init.py 将lua-format 复制到/usr/bin   2.  mdb_interface 中使用which获取lua-format的执行路径。"
        }
    ]
}