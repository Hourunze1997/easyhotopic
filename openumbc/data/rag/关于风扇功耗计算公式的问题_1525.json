{
    "topic_id": 1525,
    "question": "关于风扇功耗计算公式的问题 - local function calculate_fan_power(speed_range, power_range, pwm_percent)\nlocal len_speed_range = #speed_range\nlocal len_power_range = #power_range\n– SpeedRange和PowerRange长度必须相等，且长度至少大于等于2\n– 原因：\n– 例如：SpeedRange: 0,    20,  30,  40,  50,  60,  70,    80,   90,  100\n–      PowerRange: 192, 192, 276, 396, 564, 828, 1176, 1632, 2160, 2700\n–      若数组长度为1，则无法计算对应功耗值，长度大于等于2时通过斜率计算\nif len_speed_range ~= len_power_range or len_speed_range < 2 then\nlog:info(‘Fan speed range or power range is incorrectly configured!’)\nreturn 0\nend\nif pwm_percent < speed_range[1] or pwm_percent > speed_range[len_speed_range] then\nlog:info(‘Parse fan speed range array failed!’)\nreturn 0\nend\nlocal index = 2\nfor i = 2, len_speed_range do\nif pwm_percent <= speed_range[i] then\nindex = i\nbreak\nend\nend\nlocal slope = (power_range[index] - power_range[index - 1]) / (speed_range[index] - speed_range[index - 1])\nlocal intercept = power_range[index] - slope * speed_range[index]\nreturn slope * pwm_percent + intercept\nend\n想询问上面的通过获取风扇的当前转速与此风扇型号配置的SpeedRange和PowerRange来计算当前的风扇功耗的方法是否通用\n如果通用这个SpeedRange和PowerRange是什么对应关系 要怎么配置\n下面是一种风扇型号的SpeedRange和PowerRange配置\n“FanType_1”: {\n“Name”: “02314QEB 4056+”,\n“Index”: 1,\n“IsDefaultType”: true,\n“IsTwins”: true,\n“FrontMaxSpeed”: 23000,\n“RearMaxSpeed”: 22760,\n“PartNumber”: “02314QEB”,\n“BOM”: “BOM 32030300-005”,\n“SystemId”: 1,\n“IdentifyRangeLow”: 9562,\n“IdentifyRangeHigh”: 12937,\n“SpeedRange”: [\n0,\n20,\n30,\n40,\n50,\n60,\n70,\n80,\n90,\n100\n],\n“PowerRange”: [\n192,\n192,\n276,\n396,\n564,\n828,\n1176,\n1632,\n2160,\n2700\n],\n“FanDiameterMm”: 40\n},",
    "topic_user_name": "kunlun_yangsen",
    "best_answer_url": "/t/topic/1525/3",
    "reply_posts": [
        {
            "user_name": "Lishuol",
            "topic_closed": true,
            "is_solution": false,
            "post_url": "/t/topic/1525/2",
            "text": "这个我理解是根据风扇规格来的吧，具体多少转速对应多少功率要根据风扇手册来配置"
        },
        {
            "user_name": "kunlun_luzhanghui",
            "topic_closed": true,
            "is_solution": true,
            "post_url": "/t/topic/1525/3",
            "text": "风扇功耗一般是通过风扇板上的ina220芯片获取的，如果没有这个芯片或者没有风扇板，风扇放在主板上的话，通过转速区间（比如0-15000转）对应功耗范围(0-50w或者100w），之前实测是非常不准确的……因为风扇转速和功耗不是一个线性关系，这个只能假装看看，估计公式价值意义不太大"
        },
        {
            "user_name": "Wwhh",
            "topic_closed": true,
            "is_solution": false,
            "post_url": "/t/topic/1525/4",
            "text": "风扇功耗计算公式的目的是预估风扇功耗值，预估的前提是获取不到对应风扇传感器功耗时进行估算；\n预估请根据对应热设计提供数据进行适配；"
        }
    ]
}